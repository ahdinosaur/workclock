"use strict";

var should = require('should');
var sinon = require('sinon');

var TaskListView = require('../TaskListView');

describe("TaskListView", function() {
  beforeEach(function() {
    var taskEl = document.createElement('div');
    taskEl.className = 'tasks';
    document.body.appendChild(taskEl);
    this.taskView = new TaskListView({ el: '.tasks' });
    this.taskCollection = this.taskView.data.tasks;
  });

  describe('Adding a new task by clicking the plus button', function() {
    beforeEach(function() {
      this.taskView.el.querySelector('button.create').click();
      this.taskView.el.querySelector('button.create').click();
      sinon.stub(taskCollection, 'save');
    });

    it("should create and empty task", function() {
      this.taskView.el.querySelectorAll('form.task-form').length.should.equal(2);
    });

    it("should not save the task to the server", function() {
      should(taskCollection.save.called).not.ok
    });

    describe("Editing the task", function() {
      beforeEach(function() {

      });

      it("should save the task to the server", function() {

      });
    });
  });
});
