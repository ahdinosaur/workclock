"use strict";

var should = require('should');
var sinon = require('sinon');

var TaskListView = require('../TaskListView');

describe("TaskListView", function() {
  var taskView, taskCollection;

  beforeEach(function() {
    var taskEl = document.createElement('div');
    taskEl.className = 'tasks';
    //document.body.appendChild(taskEl);
    taskView = new TaskListView({ el: taskEl });
    taskCollection = taskView.data.tasks;
  });

  describe('Adding a new task by clicking the plus button', function() {
    beforeEach(function() {
      taskView.el.querySelector('button.create').click();
      taskView.el.querySelector('button.create').click();
      sinon.stub(taskCollection, 'save');
    });

    it("should create and empty task", function() {
      taskView.el.querySelectorAll('form.task-form').length.should.equal(2);
    });

    it("should not save the task to the server", function() {
      should(taskCollection.save.called).not.ok;
    });
    
    /*
    describe("Editing the task", function() {
      beforeEach(function() {

      });

      it("should save the task to the server", function() {

      });
    });
    */
  });
});
