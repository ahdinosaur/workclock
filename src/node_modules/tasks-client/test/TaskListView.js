"use strict";

var should = require('should');
var sinon = require('sinon');

var TaskListView = require('../TaskListView');

describe("TaskListView", function() {
  var taskView, taskList;

  beforeEach(function() {
    var taskEl = document.createElement('div');
    taskEl.className = 'tasks';
    document.body.appendChild(taskEl);
    taskView = new TaskListView({ el: taskEl });
    taskList = taskView.data.tasks;
    taskList.reset();
  });

  describe('adding a new task by clicking the plus button', function() {
    beforeEach(function() {
      taskView.el.querySelector('button.create').click();
      taskView.el.querySelector('button.create').click();
      sinon.stub(taskList, 'add');
    });

    it("should add an empty task", function() {
      should(taskList.add.called).ok;
      taskList.models.length.should.equal(1);
    });

    it("should not save the task to the server", function() {
      should(taskList.models[0].save.called).not.ok;
    });
    
    /*
    describe("editing the task", function() {
      beforeEach(function() {

      });

      it("should save the task to the server", function() {

      });
    });
    */
  });
});
