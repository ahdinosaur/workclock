"use strict";

var feathers = require('feathers');
var phantom = require('phantom');
var should = require('should');

describe("CRUD tasks", function () {
  var client, server;

  before(function (done) {
    phantom.create(function (ph) {
      ph.createPage(function (tab) {
        client = tab;
        server = require('server');
        server.listen(5000, function () {
          done();
        });
      });
    });
  });

  it("should return return page", function (done) {
    client.open('http://localhost:5000/', function (status) {
      client.evaluate(function () {
        return "apple";
      }, function (result) {
        result.should.equal("apple");
        done();
      });
    });
  });
});
